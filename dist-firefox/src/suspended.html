<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>FastBrowse â€” Tab Suspended</title>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 0; padding: 40px; background: #f5f5f5; color: #444; }
    .container { max-width: 520px; margin: 0 auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); padding: 32px; text-align: center; }
    .icon { font-size: 56px; margin-bottom: 16px; }
    h1 { margin: 0 0 8px; color: #333; font-size: 22px; }
    .title { color: #666; font-size: 14px; margin: 4px 0 10px; }
    .url { font-size: 12px; color: #999; word-break: break-all; margin: 8px 0 20px; }
    .actions { display: flex; gap: 10px; justify-content: center; }
    button { background: #2196F3; color: #fff; border: none; padding: 10px 18px; border-radius: 6px; cursor: pointer; font-size: 14px; }
    button.secondary { background: #607d8b; }
    button:hover { filter: brightness(0.95); }
    .hint { margin-top: 14px; font-size: 12px; color: #777; }
  </style>
</head>
<body>
  <div class="container">
    <div class="icon">ðŸ˜´</div>
    <h1>Tab Suspended</h1>
    <div class="title" id="page-title"></div>
    <div class="url" id="page-url"></div>
    <div class="actions">
      <button id="restore-full">Restore</button>
      <button id="restore-lite" class="secondary" title="Restore in Lite Mode (block heavy media)">Restore (Lite)</button>
    </div>
    <div class="hint">Saved by FastBrowse to reduce memory usage.</div>
  </div>

  <script>
    function qs(name) {
      const p = new URLSearchParams(location.search);
      return p.get(name);
    }

    const tabId = Number(qs('tabId')) || null;
    const url = qs('url') ? decodeURIComponent(qs('url')) : '';
    const title = qs('title') ? decodeURIComponent(qs('title')) : '';

    document.getElementById('page-title').textContent = title || 'Unknown Tab';
    document.getElementById('page-url').textContent = url || 'about:blank';

    function sendRestore(forceMode) {
      try {
        chrome.runtime.sendMessage({ action: 'restoreFromSuspended', tabId, forceMode }, (resp) => {
          // No-op; background will navigate this tab back
        });
      } catch (_) {
        // Fallback: try direct navigation if extension messaging fails
        if (url) location.href = url;
      }
    }

    document.getElementById('restore-full').addEventListener('click', () => sendRestore('full'));
    document.getElementById('restore-lite').addEventListener('click', () => sendRestore('lite'));
  </script>
</body>
</html>
